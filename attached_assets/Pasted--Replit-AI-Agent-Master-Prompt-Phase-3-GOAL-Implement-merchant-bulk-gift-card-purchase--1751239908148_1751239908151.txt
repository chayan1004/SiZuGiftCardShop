// Replit AI Agent â€“ Master Prompt: Phase 3
// âš™ï¸ GOAL: Implement merchant bulk gift card purchase flow with live API and dynamic pricing tiers

/*
ğŸ§± PRE-CHECKS â€“ DO NOT SKIP:
- DO NOT recreate the merchant dashboard or routes already in use.
- Only use the existing `/api/merchant/bulk-orders` backend endpoint.
- Only use the authenticated merchant JWT already handled by `requireMerchant`.
- Use Tailwind + shadcn/ui components to match existing project style.
- Ensure all logic is placed in `client/src/pages/MerchantBulkPurchase.tsx`
*/

1. âœ… Create or update `client/src/pages/MerchantBulkPurchase.tsx` with:
   - Input: Quantity (with + / - stepper)
   - Auto-calculated Unit Price based on tiers:
     - 1â€“9: $25.00
     - 10â€“49: $22.00
     - 50â€“99: $20.00
     - 100+: $18.00
   - Display: Total Price = Quantity Ã— Unit Price
   - Button: â€œPurchase Gift Cardsâ€

2. ğŸ›  On submit:
   - Send `POST` request to `/api/merchant/bulk-orders` with:
     ```ts
     {
       quantity: number,
       unit_price: number,
       total_price: number
     }
     ```
   - Include merchant JWT in `Authorization: Bearer <token>` header (use apiRequest utility).

3. ğŸ‰ On success:
   - Show toast â€œOrder Placed!â€
   - Redirect to `/merchant-dashboard`
   - (optional) Trigger confirmation email if backend already handles it

4. ğŸ“² Add link to Merchant Dashboard top nav:
   - Button/link: `Buy More Gift Cards` â†’ `/merchant-bulk-purchase`

5. ğŸ”’ Protect `/merchant-bulk-purchase` using `ProtectedRoute` with role check.

6. âœ… TEST the entire flow:
   - Log in as a merchant
   - Visit `/merchant-bulk-purchase`
   - Select quantity (e.g., 60)
   - Confirm price updates to $20/unit = $1200
   - Place order â†’ redirect + dashboard reflects new order

// DO NOT create new files unless required.
// DO NOT duplicate dashboard layout â€“ reuse existing layout components.
// DO NOT hardcode merchant ID or JWT â€“ use context/auth hook properly.
// DO NOT use mock APIs. Only real, integrated backend.
// Final result must be LIVE-USE ready, mobile-optimized, clean TypeScript.
